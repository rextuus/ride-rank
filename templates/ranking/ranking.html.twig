{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ encore_entry_link_tags('ranking') }}
{% endblock %}


{% block body %}
    <h2 class="mb-3">Meine Bestenliste</h2>

    {% for coaster in ranking %}
        <div class="ranking-card d-flex align-items-center mb-3 p-3 shadow-sm rounded position-relative">
            <!-- Gefahren-Badge -->
            {% if coaster.isSeen %}
                <span class="badge ridden-badge position-absolute top-0 end-0 mt-2 me-2">Gefahren</span>
            {% endif %}

            <!-- Bild + Badges -->
            <div class="ranking-image-wrapper position-relative">
                <img src="{{ coaster.image }}" alt="{{ coaster.name }}" class="ranking-image rounded">

                <!-- Platzierungs-Badge -->
                <div class="position-badge position-{{ loop.index }}">
                    {{ loop.index }}
                </div>
            </div>

            <!-- Infos -->
            <div class="ranking-info flex-grow-1 ms-3">
                <h5 class="mb-1 coaster-name">{{ coaster.name }}</h5>
                <div>{{ coaster.park }}</div>
                <div><em>{{ coaster.country }}</em></div>

                <!-- Bewertungen -->
                <div class="mt-2">
                    {{ component('EloRating', {
                        'rating': coaster.eloRating,
                        'personalRating': coaster.personalRating
                    }) }}
                </div>

                <!-- Stats -->
                <div class="stats mt-2">
                    <span class="stat-win">{{ ux_icon('subway:up-2') }} {{ coaster.wins }}</span>
                    <span class="stat-loss">{{ ux_icon('subway:down-2') }} {{ coaster.losses }}</span>
                </div>
            </div>

            <!-- Info-Button jetzt global oben rechts -->
            <a href="{{ path('app_coaster_show', { coaster: coaster.id }) }}"
               class="btn btn-sm btn-info-circle info-top-right" title="Details">
                {{ ux_icon('material-symbols:info-outline') }}
            </a>
        </div>
    {% endfor %}
{% endblock %}

